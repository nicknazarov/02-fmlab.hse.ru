# print(a+b)
# if(length(na.omit(prices))>1 ){
if(prices[a]<prices[a+b] ){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices)<2){
break
}
a <- which.min(prices)
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
if(prices[a]<prices[a+b] ){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
a <- which.min(prices)
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
a <- which.min(prices)
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
# print(a)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
a <- which.min(prices)
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
a <- which.min(prices)
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
a <- which.min(prices)
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
prices
temp
sum(temp)
sum(dat[,2]*temp)
sum(dat[,2]*temp)
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
a <- which.min(prices)
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
print(b)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
a <- which.min(prices)
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
print(a+b)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
a <- which.min(prices)
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
print(b)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
a <- which.min(prices)
if((a+1) < length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
print(a+b)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
temp
prices
temp <- rep(0,101)
prices <- dat [,2]
while(TRUE)
{
if(length(na.omit(prices))<2){
break
}
a <- which.min(prices)
if((a+1) <= length(prices)){
if( length(na.omit(prices[(a+1):length(prices)]))>0){
b <- which.max(prices[(a+1):length(prices)])
print(a)
print(a+b)
if(prices[a] < prices[a+b]){
temp[a] <- -1
temp[a+b] <- 1
prices[a+b] <- NA
}
}
}
prices[a] <- NA
}
prices
temp
sum(temp)
sum(dat[,2]*temp)
prices <- dat [,2]
prices[abs(temp)]
prices <- dat [,2]
prices
temp
prices[abs(temp)]
prices
abs(temp)
prices[c(abs(temp))]
abs(temp)-1
abs(abs(temp)-1)
prices*abs(abs(temp)-1)
---
>Период отслеживания менялся от  **`r 1`** месяца до  **`r 12`**
---
title: "Все стратегии - только таблицы (данные с нулями)"
output:
html_document:
pandoc_args: [
"+RTS", "-K64m",
"-RTS"
]
lang: russian
---
```{r, include=FALSE}
rm(list=ls())
#setwd("J:/temp/")
setwd("/home/nazarov/02-fmlab.hse.ru/05 - reverse/")
library(pander)
library(DT)
panderOptions('table.split.table', Inf)
source("R/reality_func2.R")
library(XLConnect)
library(ggplot2)
library(scales)
n.graph <- 0
n.table <- 0
###########################################################################################
```
<p>
<br />
</p>
>Период отслеживания менялся от  **`r 1`** месяца до  **`r 12`**
>Период ожидания менялся от  **`r 0`**  до  **`r 8`** недель
>Период инвестирования менялся от  **`r 1`** месяца до  **`r 24`**
>Рассматривалось 4 процентили  **`r 0.5`**,  **`r 0.3`** ,  **`r 0.2`**,  **`r 0.1`**
<p>
<br />
</p>
## _____________________________Китай________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/5 days china/china_price_Fri.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **520**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/china_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
## _____________________________Индия________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/5 days india/india_price_Fri.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **555**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/india_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
## _____________________________Россия________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/stocks_russia.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **545**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/russia_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
## _____________________________Бразилия________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/5 days brazil/brazil_price_Fri.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **531**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/brazil_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
## _____________________________Индонезия________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/5 days indonesia/indonesia_price_Fri.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **505**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/indonesia_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
## _____________________________Малайзия________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/5 days malaysia/malaysia_price_Fri.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **537**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/malaysia_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
## _____________________________Корея________________________
```{r, include=FALSE}
# Загружаем ранее сохраненные цены закрытия
resultDataFull<- readWorksheet(loadWorkbook("/home/nazarov/02-fmlab.hse.ru/05 - reverse/data/5 days korea/korea_price_Fri.xlsx"),sheet=1)
row.names(resultDataFull) <- resultDataFull[,1]
resultDataFull <-resultDataFull[,-1]
```
>Количество исследумых компаний -- **`r ncol(resultDataFull)`**
>Количество портфелей, использованных для подсчета средней доходности -- **537**
<p>
<br />
<br />
</p>
```{r, echo=FALSE, results='asis'}
mylist <- readRDS("/home/nazarov/02-fmlab.hse.ru/06 - best strategies/results/korea_best.RDS") # читаем из файла что там есть
result.data <- mylist[[1]]
```
>Всего было рассмотрено **`r nrow(result.data)`** стратегий
<p>
<br />
</p>
```{r, echo=FALSE, results='asis'}
n.table<-n.table+1
```
####**Таблица `r n.table`. Все стратегии **
```{r, echo=FALSE, results='asis'}
datatable(round(result.data[,c(1,2,3,4,5,6,7,10)],6), filter = 'top',options = list(pageLength = 10, lengthMenu = c( 10, 20, 50, 100, nrow(result.data))) )
```
<p>
<br />
</p>
